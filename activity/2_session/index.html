<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad Sesión 2</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="../../prism.css">
</head>

<body>
<div class="container">
    <div class="section">
        <a class="back-button" href="/activity/activity.html">
            < Back</a>
        <h1>Actividad 2</h1>
        <p class="caption">Actividades Sesión Avanzada</p>
        <hr class="separator">

        <h2 id="ejercicio-1">Ejercicio 1</h2>
        <ul>
            <li>Escribe un programa que tome como entrada un objeto y devuelva una lista con sus
                propiedades. Solo puede tener como entrada un objeto y el tipo de vuelta tiene que ser un
                array.
            </li>
        </ul>
        <pre><code class="lang-javascript"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">person</span> {
    <span class="hljs-attribute">name</span>: “Lucas”,
    <span class="hljs-attribute">age</span>: <span class="hljs-number">27</span>,
    <span class="hljs-attribute">profession</span>:”Developer",
}
<span class="hljs-comment">// return -&gt; ["name", "age", "profession"]</span>
</code></pre>
        <h2 id="ejercicio-2">Ejercicio 2</h2>
        <ul>
            <li>Enumera los distintos valores que puede tener “this” y pon un ejemplo de cada uno.</li>
        </ul>
        <b style="color:Red">Respuesta</b>
        <br>
        <br>
        <b style="color:Red">
            <ul>
                <li>Por Contexto Global , Se refiere al objeto global en este caso (navegador) seria window</li>
                <pre>
                <code class="language-javascript">
 console.log(this === window) // true
                </code>
                    </pre>
                <li>Por Contexto de Funcion en modo no escricto , Se refiere al objeto global descrito previamente</li>
                <pre>
                <code class="language-javascript">
function f1() {
console.log(this === window)
 }
f1(); // true - en este caso el this es el objeto global y da true porque es el mismo objeto
                </code>
                    </pre>
                <li>Por Contexto de Funcion en modo escricto, Se refiere al objeto inmerso en la funcion</li>
                <pre>
                <code class="language-javascript">
function f1() {
'use strict';
console.log(this === undefined) // en este caso es undefined dado a que no hay ningun objeto que contenga  la funcion
}
f1(); // true
                </code>
                    </pre>
                <li>En un metodo, se refiere al objeto propietario</li>
                <pre>
                <code class="language-javascript">

let person = {
    name: "Lucas Fernandez",
    greeting() {
        console.log(`Hello, my name is ${this.name}`) // en este caso el this es el objeto person a diferencia del ejemplo previo no dara undefined
    }
}
 person.greeting() // Hello, my name is Lucas Fernandez
                </code>
                    </pre>
                <li>En un arrow function, se refiere al contexto de la funcion</li>
                <pre>
                <code class="language-javascript">

let personSw = {
 name: "Dark Vader",
greeting: () => {
 console.log(`Hello, my name is ${this.name}`) // en este caso va a obtener el valor de la variable global name , si esta no estuviera declarada daria undefined
}
}
personSw.greeting() // Hello, my name is Luke Skywalker

// si quisieramos acceder al valor del objeto seria de la siguiente forma
let personSw = {
    name2: "Dark Vader",
    greeting: () => {
        console.log(`Hello, my name is ${personSw.name2}`) // en este caso va a obtener el valor del atributo del objeto personSw
    }
}
personSw.greeting() // Hello, my name is Dark Vader

                </code>
                    </pre>
                <li>En un evento, se refiere al elemento que recibe el evento</li>
                <pre>
                <code class="language-javascript">
function actionButton() {
console.log("Clicked");
console.log(this);
}
actionButton(); // Clicked
                // Window { window:Window, self : Window, document: Document, … }
                // En este caso el this es el objeto global ya que fue invocado desde la importacion del JS del index.html
                </code>
                    </pre>
            </ul>
        </b>
        <h2 id="ejercicio-3">Ejercicio 3</h2>
        <ul>
            <li>Crea una clase a la que llamaremos &quot;InvertirCadena&quot; con las siguientes propiedades:</li>
            <li>Un atributo llamado <code>cadenaInvertir</code> que sea una cadena vacía.</li>
            <li>Una función en formato <strong>arrow function</strong>, que tome el atributo <code>cadenaInvertir</code>
                e imprima en pantalla el resultado invertido. Ej &quot;Hola mundo&quot; quedaría &quot;odnum aloH&quot;.
            </li>
            <li>Si el parámetro de la cadena <code>cadenaInvertir</code> es vacío, lance un error (throw). Ej. &quot;&quot;.
                throw error.
            </li>
            <li>Ahora instancia la clase en un objeto que llamaremos <code>invertirCadena</code>.</li>
        </ul>
        <p>Ejecuta primero la función sin cambiar <code>cadenaInvertir</code>. ¿Cómo podemos hacer para que nuestro
            código no rompa al ejecutarse?. Ahora cambia el valor a <code>cadenaInvertir</code> y vuelve a llamar la
            función. ¿Cuál es el resultado?. Por último, intenta acceder al siguiente método <code>invertirCadena.nuevoMetodo()</code>.
            ¿Cómo podemos hacer para que no de un error?</p>
        <b style="color:Red">Respuesta</b>
        <br>
        <br>
        <b style="color:Red">
            <ul>
                <li>
                    ¿Cómo podemos hacer para que nuestro  código no rompa al ejecutarse? :
                     <ul>
                         <li>Capturar la excepcion(try / catch) y retornar una cadena vacia</li>
                         <li>Condicionar el parametro de entrada y en vez de retornar una excepcion retornar un resultado vacio</li>
                     </ul>
                </li>
                <li>
                    ¿Cuál es el resultado? : Dado que el ingreso fue <code>cadenaInvertir</code> el retorno fue <code>ritrevnIanedac</code>
                </li>
                <li>
                    Por último, intenta acceder al siguiente método <code>invertirCadena.nuevoMetodo()</code>.
                    ¿Cómo podemos hacer para que no de un error? : El error es el que no existe la funcion
                   <code> index.js:18 Uncaught TypeError: invertirCadena.nuevoMetodo is not a function</code>
                    las alternativas para que esto no ocurra es:
                    <ul>
                        <li>
                            Agregar el metodo mediante el uso de prototype.
                            <pre>
<code class="language-javascript">
import {InvertirCadena} from './invertirCadena.js';
const invertirCadena = new InvertirCadena("cadenaInvertir");
// Alternativa 1
InvertirCadena.prototype.nuevoMetodo = function() {
    return "Esto es un nuevo metodo agregado por prototype"
};
console.log(invertirCadena.nuevoMetodo());
</code>
                            </pre>
                        </li>
                        <li>
                            Declarar el metodo en la clase.
                            <pre>
<code class="language-javascript">
class InvertirCadena {

    constructor(cadenaInvertir) {
        this.cadenaInvertir = cadenaInvertir;
    }

    reverseString = () => {
        if (this.cadenaInvertir.length === 0) {
            throw new Error("La cadena no puede ser vacia");
        } else {
            return  this.cadenaInvertir.split("").reverse().join("");
        }



    }
  nuevoMetodo = () => {
    return "Esto es un nuevo metodo declarado en clase"


    }

}

export {InvertirCadena};
</code>
                            </pre>
                        </li>
                    </ul>
                </li>
            </ul>


        </b>
        <h2 id="ejercicio-4">Ejercicio 4</h2>
        <ul>
            <li>Crea una clase con el formato ES6. Esta clase va a tener dos atributos, <em>username</em> y
                <em>password</em> y un método <em>login()</em> que compruebe que username tiene el valor
                <strong>admin</strong> y password el valor <strong>passwd</strong> y en caso positivo, lance
                una alerta diciendo que el usuario esté logeado, en caso contrario, que diga que el usuario
                o la contraseña son incorrectas. Siendo que:
            </li>
        </ul>
        <pre><code class="lang-javascript">let login = new Login(“admin”, “passwd”) // alert -&gt; <span
                class="hljs-keyword">User</span> <span class="hljs-title">logged</span> <span
                class="hljs-keyword">in</span>
let logbad = new Login(“pepe”, “bad”) // alert -&gt; <span class="hljs-keyword">User</span> <span
                    class="hljs-title">or</span> passwd incorrect
</code></pre>
        <h2 id="ejercicio-5">Ejercicio 5</h2>
        <p>En este ejercicio os voy a hacer mirar un poco de documentación extra. Y vamos a utilizar el
            fichero que se encuentra en <code>activity/2_session/index.html</code>:</p>
        <ul>
            <li>Crea dos <em>clickListener</em>, para los botones con id <strong>loginSuccess</strong> y
                <strong>loginFailure</strong>. En el primero crearemos un objeto login que sea correcto y
                llamaremos a la función para que de el resultado correcto. En el segundo crearemos un objeto
                login con parámetros incorrectos y llamaremos a login para que falle. Para ello consulta los
                siguientes documentos.
            </li>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById">Get DOM
                element</a></li>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event">Click
                Listener</a></li>
        </ul>
        <h2 id="ejercicio-6">Ejercicio 6</h2>
        <p>En este ejercicio vamos a añadir asincronía al resto de botones:</p>
        <ul>
            <li>
                <p>Crea dos <em>clickListener</em>, para los botones con id
                    <strong>loginSuccessAsync</strong> y <strong>loginFailureAsync</strong>. En el primero
                    llamaremos a la función <code>loginWitUsername</code> para que de el resultado correcto.
                    En el segundo llamaremos a la función con parámetros incorrectos. Os dejo un par de
                    pistas para resolver el ejercicio.</p>
            </li>
            <li>
                <p>Primero, <code>addEventListener(&#39;click&#39;, () =&gt; {})</code> no acepta asincronía
                    ya que es una <strong>función síncrona</strong>. Pero es posible sustituir el segundo
                    argumento <code>() =&gt; {}</code> que es una función, por una función asíncrona (solo
                    habría que añadir una palabra reservada).</p>
            </li>
            <li>
                <p><code>loginWithUsername</code> devuelve una promesa, que lanza una excepción si falla,
                    por lo que <strong>habría que atrapar esa excepción para que nuestro programa no
                        falle</strong>.</p>
            </li>
        </ul>


        <hr class="code-separator">

        <h2 id="arrow">Consola JavaScript</h2>
        <p class="folder">/activity/2_session/index.js</p>
        <button class="custom-button" id="loginSuccess">Login</button>
        <button class="custom-button button-cancel" id="loginFailure">Error</button>
        <button class="custom-button" id="loginSuccessAsync">Login Async</button>
        <button class="custom-button button-cancel" id="loginFailureAsync">Error Async</button>
        <pre>
<code class="language-javascript">// Ejercicio 1

// Ejercicio 2

// Ejercicio 3

// Ejercicio 4

// Ejercicio 5

// Ejercicio 6

let loginWitUsername = (username, password) => {
    return new Promise(function (resolve, rejected) {
        setTimeout(() => {
        if (username === "admin" && password === "passwd") {
            resolve("User logged in");
        } else {
            rejected("Error: invalid username or password");
        }
        }, 200);
    });
};</code>
</pre>

    </div>
</div>
<script src="../../prism.js"></script>
<script type="module" src="index.js">
</script>
</body>

</html>